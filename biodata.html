<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Biodata Maker</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
@page{size:A4;margin:18mm}

body{
  margin:0;
  font-family:Segoe UI,Arial;
  background:#f1f5f9;
  color:#111;
}

.container{
  max-width:1000px;
  margin:auto;
  padding:14px;
}

/* FORM */
.form-card{
  background:#fff;
  padding:14px;
  border-radius:12px;
  box-shadow:0 10px 25px rgba(0,0,0,.15);
  margin-bottom:18px;
}
.form-card h2{margin-top:0}

input,textarea,select,button{
  width:100%;
  padding:10px;
  margin-bottom:10px;
  border-radius:8px;
  border:1px solid #cbd5e1;
  font-size:14px;
}
button{
  background:#0b5ed7;
  color:#fff;
  border:none;
  font-weight:600;
}

/* CV PREVIEW */
#cv{
  background:#fff;
  padding:20px;
  border:1px solid #000;
}

.cv-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  border-bottom:2px solid #000;
  padding-bottom:10px;
}
.cv-header img{
  width:90px;
  height:120px;
  object-fit:cover;
  border:1px solid #000;
}

.section{
  margin-top:14px;
}
.section h3{
  margin:0 0 6px;
  font-size:15px;
  background:#e5e7eb;
  padding:6px;
  border-left:4px solid #0b5ed7;
}
.section p,li{
  font-size:14px;
  line-height:1.6;
}

table{
  width:100%;
  border-collapse:collapse;
  font-size:13px;
}
th,td{
  border:1px solid #000;
  padding:6px;
}

/* MOBILE */
@media(max-width:768px){
  .cv-header{flex-direction:column;gap:10px;text-align:center}
}
</style>
</head>

<body>

<div class="container">

<!-- FORM -->
<div class="form-card">
<h2>ðŸ§¾ Biodata Maker</h2>

<input placeholder="Full Name" oninput="nameOut.innerText=this.value">
<input placeholder="Address" oninput="addrOut.innerText=this.value">
<input placeholder="Phone" oninput="phoneOut.innerText=this.value">
<input placeholder="Email" oninput="emailOut.innerText=this.value">

<textarea placeholder="Objective" oninput="objOut.innerText=this.value"></textarea>

<h3>ðŸŽ“ Education</h3>
<input id="deg" placeholder="Degree">
<input id="inst" placeholder="School / University">
<input id="grade" placeholder="Grade">
<input id="year" placeholder="Year">
<button onclick="addEdu()">âž• Add Education</button>

<textarea placeholder="Experience (one per line)"
oninput="expOut.innerHTML=this.value.split('\n').map(e=>'<li>'+e+'</li>').join('')"></textarea>

<textarea placeholder="Skills (one per line)"
oninput="skillOut.innerHTML=this.value.split('\n').map(e=>'<li>'+e+'</li>').join('')"></textarea>

<textarea placeholder="Languages (one per line)"
oninput="langOut.innerHTML=this.value.split('\n').map(e=>'<li>'+e+'</li>').join('')"></textarea>

<h3>ðŸ“¸ Passport Photo</h3>
<input type="file" accept="image/*" onchange="loadImage(event)">

<button onclick="downloadPDF()">ðŸ“„ Download PDF</button>
</div>

<!-- CV -->
<div id="cv">
  <div class="cv-header">
    <div>
      <strong id="nameOut">Your Name</strong><br>
      <span id="addrOut">Address</span><br>
      <span id="phoneOut">Phone</span> | <span id="emailOut">Email</span>
    </div>
    <img id="photo">
  </div>

  <div class="section">
    <h3>Objective</h3>
    <p id="objOut"></p>
  </div>

  <div class="section">
    <h3>Education</h3>
    <table>
      <tr><th>Course</th><th>Institute</th><th>Grade</th><th>Year</th></tr>
      <tbody id="eduTable"></tbody>
    </table>
  </div>

  <div class="section"><h3>Experience</h3><ul id="expOut"></ul></div>
  <div class="section"><h3>Skills</h3><ul id="skillOut"></ul></div>
  <div class="section"><h3>Languages</h3><ul id="langOut"></ul></div>
</div>

</div>

<script>
function addEdu(){
  eduTable.innerHTML+=
  `<tr><td>${deg.value}</td><td>${inst.value}</td><td>${grade.value}</td><td>${year.value}</td></tr>`;
  deg.value=inst.value=grade.value=year.value="";
}

function loadImage(e){
  const img=new Image();
  img.onload=()=>{
    const c=document.createElement("canvas");
    const s=Math.min(img.width,img.height);
    c.width=300;c.height=400;
    c.getContext("2d")
     .drawImage(img,(img.width-s)/2,(img.height-s)/2,s,s,0,0,300,400);
    photo.src=c.toDataURL("image/jpeg",1);
  };
  img.src=URL.createObjectURL(e.target.files[0]);
}

function downloadPDF(){
  const el=document.getElementById("cv");
  html2pdf(el,{
    margin:10,
    filename:"Biodata.pdf",
    image:{type:"jpeg",quality:0.98},
    html2canvas:{scale:2,useCORS:true},
    jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}
  });
}
</script>

</body>
</html>
